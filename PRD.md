# PetPhoto 产品需求文档（PRD）

## 1. 产品概述

### 1.1 产品名称
**PetPhoto** - 萌宠拟人化 AI 创意照片生成平台

### 1.2 产品定义
PetPhoto 是一个 AI 驱动的宠物创意照片平台，允许宠物主人上传他们的宠物照片，通过 AI 生成创意拟人化照片。用户可以选择多种场景（证件照、职业角色、文化风格），系统将自动生成独一无二的创意照片。

### 1.3 目标用户
- **主要用户**：宠物主人（18-45岁）、社交媒体内容创作者
- **次要用户**：宠物品牌、宠物摄影师、宠物相关商家
- **地理位置**：全球，优先中文市场

### 1.4 产品目标
1. 为宠物主人提供快速、简便的创意照片生成服务
2. 建立宠物创意社区，鼓励用户分享和互动
3. 通过免费+付费订阅模式实现商业化
4. 在 6 个月内达到 10,000 月活用户

### 1.5 核心价值主张
- **简单易用**：3 步即可生成创意照片
- **高质量输出**：基于 SDXL + ControlNet 的专业级 AI 生成
- **丰富场景**：18+ 预设场景 + 自定义提示词
- **价格实惠**：免费方案提供 3 张/月，付费仅需 $4.99/月
- **即时生成**：15-30 秒内获得结果

---

## 2. 产品功能规划

### 2.1 核心功能（MVP）

#### 2.1.1 用户认证系统
- **功能**：支持 Email + 密码、Google OAuth、GitHub OAuth 三种登录方式
- **验证**：邮箱验证、密码重置
- **会话管理**：30 天自动过期
- **优先级**：P0（关键）

#### 2.1.2 宠物照片上传
- **功能**：
  - 支持 JPG、PNG、WebP 格式
  - 单文件大小限制：20MB
  - 自动图片压缩到 1MB 内
  - 上传进度显示
- **存储**：Vercel Blob Storage（5GB 免费额度）
- **验证**：前端 + 后端双层验证
- **优先级**：P0（关键）

#### 2.1.3 场景模板系统
- **功能**：预设 18 个创意场景

**证件照系列（4 个）：**
- 身份证照（蓝色背景）
- 工作证照（正式风格）
- 护照照（国际标准）
- 学生证照（青春风格）

**职业角色系列（8 个）：**
- 医生（白大褂 + 听诊器）
- 消防员（消防服 + 头盔）
- 宇航员（宇航服 + 头盔）
- 律师（法袍 + 公文包）
- 警察（警服 + 徽章）
- 飞行员（制服 + 墨镜）
- 厨师（厨师服 + 帽子）
- 工程师（工作服 + 安全帽）

**文化风格系列（6 个）：**
- 古装（汉服、旗袍）
- 和服（日本传统）
- 韩服（韩国传统）
- 朝代风格（唐宋元明清）
- 民族服饰（苗族、藏族等）
- 时代穿越（70、80、90 年代）

- **UI 展现**：卡片网格布局（3-4 列响应式）
- **优先级**：P0（关键）

#### 2.1.4 图片生成引擎
- **功能**：
  - 基于 SDXL + ControlNet 模型
  - 使用 Replicate API 调用
  - ControlNet 强度：0.75（平衡创意与准确性）
  - 生成时间：15-30 秒
  - 输出分辨率：
    - 免费用户：512x512px
    - 付费用户：1024x1024px

- **提示词优化**：
  ```
  基础模板："{pet_type}在{scenario}场景中，{style}风格，专业摄影，高清，细节清晰"
  示例：狗狗作为医生，穿着白大褂，听诊器，医院背景，专业医疗风格
  ```

- **错误处理**：
  - API 超时：自动重试 3 次
  - 生成失败：返回错误提示 + 退款配额

- **优先级**：P0（关键）

#### 2.1.5 生成历史与下载
- **功能**：
  - 查看所有历史生成的图片
  - 批量下载（仅付费用户）
  - 分享到社交媒体
  - 删除历史记录

- **存储**：生成结果存储在 Vercel Blob，24 小时缓存
- **优先级**：P1（高）

#### 2.1.6 付费与配额系统
- **免费配额**：
  - 每月 3 张生成机会
  - 512x512px 分辨率
  - 标准生成队列
  - 仅预设场景，无自定义提示词
  - 月度重置：每月 1 日 UTC

- **付费配额**（$4.99/月 或 $39.99/年）：
  - 无限制生成
  - 1024x1024px 高清分辨率
  - 优先队列
  - 自定义提示词
  - ControlNet 强度调整
  - 批量下载历史

- **支付方式**：Stripe（信用卡、数字钱包）
- **优先级**：P1（高）

### 2.2 次要功能（Phase 2）

#### 2.2.1 用户中心
- **功能**：
  - 查看个人信息
  - 订阅管理（升级/取消）
  - 配额统计
  - 账户设置
  - 隐私控制

- **优先级**：P2（中）

#### 2.2.2 自定义提示词（仅付费用户）
- **功能**：
  - 自由输入提示词
  - 提示词历史记录
  - 社区提示词模板库（未来）

- **优先级**：P2（中）

#### 2.2.3 内容分享与社区
- **功能**：
  - 生成结果分享到微博、小红书、微信
  - 用户投稿示例库
  - 社区点赞和评论（未来）

- **优先级**：P3（低）

### 2.3 SEO 与营销页面

#### 2.3.1 首页（/）
- **目标**：品牌展示 + 用户转化
- **核心内容**：
  - Hero 区：标题 + 演示图片
  - 功能卡片：3 大核心功能
  - 使用流程：3 步骤可视化
  - 场景展示：6 个示例场景
  - 价格对比：免费 vs 付费
  - 常见问题：10 个 FAQ
  - CTA：立即开始

#### 2.3.2 功能说明页（/features）
- **目标**：教育用户 + SEO
- **核心内容**：
  - 证件照系列详解 + 示例
  - 职业角色系列详解 + 示例
  - 文化风格系列详解 + 示例
  - 自定义提示词说明

#### 2.3.3 示例展示页（/examples）
- **目标**：社群证明 + SEO
- **核心内容**：
  - 瀑布流展示用户生成的示例
  - 按场景分类筛选
  - 每个示例配唯一可分享 URL
  - 用户故事投稿

#### 2.3.4 价格页（/pricing）
- **目标**：转化优化
- **核心内容**：
  - 功能对比表
  - 价格说明
  - 常见问题
  - 30 天退款保证
  - CTA：选择方案

#### 2.3.5 博客（/blog）
- **目标**：长尾 SEO + 用户粘性
- **内容类型**：
  - 宠物拍照技巧（提高上传质量）
  - 场景知识普及（医生历史、文化介绍等）
  - 用户案例故事
  - 功能更新日志

---

## 3. 技术架构

### 3.1 前端技术栈
```
框架：Next.js 14 + React 18 + TypeScript
样式：Tailwind CSS + 自定义设计系统
动画：Framer Motion + 21st UI 组件灵感
表单：React Hook Form + Zod
状态：Zustand（轻量级）
HTTP：SWR + axios
```

### 3.2 后端技术栈
```
运行时：Node.js（Vercel Serverless）
ORM：Prisma + PostgreSQL
认证：NextAuth.js v5
文件存储：Vercel Blob Storage
图片生成：Replicate API
支付：Stripe API
```

### 3.3 数据库架构
```
数据库：PostgreSQL（Supabase）
主要表：
- users（用户账户）
- accounts（OAuth 关联）
- sessions（会话）
- user_subscriptions（订阅信息）
- scene_templates（场景模板）
- generation_records（生成历史）
- verification_tokens（邮箱验证）
```

### 3.4 部署架构
```
前端+后端：Vercel
数据库：Supabase（PostgreSQL 托管）
文件存储：Vercel Blob Storage（5GB 免费）
支付：Stripe
API：Replicate（图片生成）
CDN：Vercel 内置 CDN
```

---

## 4. 用户体验流程

### 4.1 新用户注册流程
1. 访问首页 → 点击"开始使用"
2. 选择登录方式（Email / Google / GitHub）
3. 邮箱验证（如使用 Email）
4. 完成个人信息（可选：上传头像）
5. 重定向到生成页面
6. 自动创建免费订阅（3 张/月）

### 4.2 生成照片流程
1. 用户登录 → 进入生成页
2. 上传宠物照片（支持拖拽）
3. 图片预处理（前端压缩）
4. 选择场景或输入自定义提示词
5. 点击"生成"按钮
6. 显示生成中动画（15-30 秒）
7. 展示生成结果
8. 用户可下载、分享或删除

### 4.3 升级付费流程
1. 用户配额用尽 → 弹出升级提示
2. 点击"升级"按钮 → 跳转到价格页
3. 选择月付或年付 → 跳转 Stripe
4. 输入支付信息 → 确认支付
5. 成功后跳转回生成页
6. 配额更新为无限制

---

## 5. 商业模式

### 5.1 收入来源
```
主要：付费订阅
- 月订阅：$4.99/月
- 年订阅：$39.99/年（节省 33%）
- 目标：首年转化率 10%，年末 1000 付费用户

次要：额外额度包（未来）
- $9.99 / 100 张（用完主配额后）
```

### 5.2 成本结构
```
API 成本：$0.025/张生成（Replicate）
估算：1000 用户 × 10 张/月 = $250/月

基础设施：
- Vercel：$0（Hobby 免费）
- Supabase：$0-25/月（按使用付费）
- Vercel Blob：$0（5GB 免费）

总计：初期 $250-300/月
```

### 5.3 定价策略
```
免费计划：3 张/月，吸引用户
付费计划：$4.99/月，年付优惠 33%
目标用户：内容创作者、宠物社交用户
定位：优质且便宜
```

---

## 6. 性能目标

### 6.1 页面加载
```
首屏加载：< 2.5 秒
LCP（最大内容绘制）：< 2.5 秒
FID（首次输入延迟）：< 100ms
CLS（累积布局偏移）：< 0.1
```

### 6.2 API 性能
```
生成 API 响应：15-30 秒（包括 AI 生成）
列表 API 响应：< 500ms
用户查询：< 100ms
```

### 6.3 Lighthouse 指标
```
Performance：> 90
SEO：100
Accessibility：95
Best Practices：95
```

---

## 7. 安全与合规

### 7.1 数据安全
- HTTPS 加密传输
- 密码 bcrypt 加密存储
- Prisma 参数化查询防 SQL 注入
- CORS 跨域保护

### 7.2 用户隐私
- GDPR 合规（隐私政策）
- 用户可删除账户和数据
- 不共享用户照片给第三方

### 7.3 内容审核
- 用户生成内容审核（未来）
- 自动检测不当内容

---

## 8. 营销与增长

### 8.1 获客渠道
- **有机搜索**：SEO 优化 + 长尾关键词
- **社交媒体**：微博、小红书、TikTok（用户投稿）
- **内容营销**：宠物相关博客内容
- **口碑传播**：鼓励用户分享结果
- **合作推广**：宠物品牌、影响者合作

### 8.2 关键 KPI
```
DAU（日活）：目标首月 100
MAU（月活）：目标首月 500，年末 10,000
付费转化率：目标 10%
用户留存率（Day 7）：目标 40%
```

---

## 9. 发布计划

### Phase 1（MVP）- 4 周
- 基础认证系统
- 照片上传和预处理
- 8 个核心场景 + 生成功能
- 免费计划
- 首页和功能说明页

### Phase 2（商业化）- 2 周
- Stripe 支付集成
- 付费订阅管理
- 生成历史和下载
- 价格页和博客框架

### Phase 3（社区）- 2 周
- 示例库和分享功能
- 用户中心完善
- 自定义提示词（付费）
- 社交分享优化

### Phase 4（优化）- 持续
- 性能优化
- SEO 改进
- 用户反馈迭代
- A/B 测试

---

## 10. 成功指标

### 10.1 产品指标
- 周活用户 > 1000
- 日均生成数 > 2000
- 付费用户 > 100（1% 转化率）
- 用户留存率 Day 7 > 30%

### 10.2 业务指标
- MRR（月度经常性收益）> $500
- 获客成本 < $5
- 用户终身价值 > $50

### 10.3 质量指标
- Lighthouse 分数 > 90
- 生成成功率 > 95%
- 用户满意度 > 4.5/5

---

## 11. 风险与应对

### 风险 1：AI 生成质量不稳定
- **应对**：与 Replicate 合作优化模型，建立 QA 流程

### 风险 2：宠物照片版权问题
- **应对**：用户协议明确所有权，不存储原始照片超过 30 天

### 风险 3：API 成本超预期
- **应对**：监控成本，考虑本地部署模型或切换供应商

### 风险 4：用户流失
- **应对**：邮件营销、推送通知、定期优化体验

---

## 12. 附录：竞品分析

### 竞争对手
- **MidJourney/DALL-E**：功能强大但复杂，不专注宠物领域
- **本地宠物摄影师**：价格高，流程长
- **通用 AI 工具**：需要提示词技巧

### 我们的优势
- 专注宠物领域，提供预设场景
- 用户友好的 3 步流程
- 价格实惠（$4.99/月）
- 移动友好的现代 UI

---

**文档版本**：1.0
**最后更新**：2024 年 11 月
**所有者**：PetPhoto 产品团队
